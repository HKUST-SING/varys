@(state: varys.framework.MasterState)
@import varys.framework.master._
@import varys.Utils

@varys.common.html.layout(title = "Varys Master on " + state.host) {

  <!-- Cluster Details -->
  <div class="row">
    <div class="span12">
      <ul class="unstyled">
        <li><strong>URL:</strong> @(state.uri)</li>
        <li><strong>Slaves:</strong> @state.slaves.size (@state.slaves.filter(_.state == SlaveState.ALIVE).size Alive) </li>
        <li><strong>Coflows:</strong> @state.activeCoflows.size Running, @state.completedCoflows.size Completed </li>
      </ul>
    </div>
  </div>

  <!-- Slave Summary -->
  <div class="row">
    <div class="span12">
      <h3> Cluster Summary </h3>
      <br/>
      @slave_table(state.slaves.sortBy(_.id))
    </div>
  </div>

  <hr/>

  <!-- Coflow Summary (Running) -->
  <div class="row">
    <div class="span12">
      <h3> Running Coflows </h3>
      <br/>
      @coflow_table(state.activeCoflows.sortBy(_.startTime).reverse)
    </div>
  </div>

  <hr/>

  <!-- Coflow Summary (Completed) -->
  <div class="row">
    <div class="span12">
      <h3> Completed Coflows </h3>
      <br/>
      @coflow_table(state.completedCoflows.sortBy(_.endTime).reverse)
    </div>
  </div>

  <hr/>

  <!-- Client Summary (Running) -->
  <div class="row">
    <div class="span12">
      <h3> Active Clients </h3>
      <br/>
      @client_table(state.activeClients.sortBy(_.startTime).reverse)
    </div>
  </div>
}
